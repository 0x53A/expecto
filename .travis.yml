language: csharp
dist: trusty
sudo: false

matrix:
  fast_finish: true
  
  include:
    - os: linux
      mono: 5.4.1
    - os: linux
      mono: weekly
    - os: linux
      mono: latest
    - os: osx
      osx_image: xcode9.1
      mono: 5.4.1
    - os: osx
      osx_image: xcode9.1
      mono: latest

  allow_failures:
    - os: osx
    - mono: weekly
    - mono: latest

addons:
  apt:
    packages:
    - libunwind8

script:
  - curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin --version 2.0.3 --install-dir .dotnet --no-path
  - curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin --version 1.1.5 --install-dir .dotnet --no-path  --shared-runtime
  - export PATH="$PWD/.dotnet":$PATH
  - export DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
  - export DOTNET_CLI_TELEMETRY_OPTOUT=1
  - ./build.sh